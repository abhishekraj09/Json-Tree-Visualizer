{"ast":null,"code":"import dagre from \"dagre\";\nexport function jsonToFlow(rootObj) {\n  let nodes = [];\n  let edges = [];\n  const safeId = path => path.replace(/[^a-zA-Z0-9_\\-$]/g, \"_\");\n  function visit(value, path = \"$\", parent = null) {\n    const id = safeId(path);\n    const nodeLabel = path === \"$\" ? \"root\" : path.split(\".\").pop();\n    const raw = typeof value === \"object\" && value !== null ? JSON.stringify(value) : String(value);\n    nodes.push({\n      id,\n      data: {\n        label: nodeLabel,\n        path,\n        value,\n        raw\n      },\n      position: {\n        x: 0,\n        y: 0\n      }\n    });\n    if (parent) {\n      edges.push({\n        id: `e-${safeId(parent)}-${id}`,\n        source: safeId(parent),\n        target: id,\n        animated: true,\n        style: {\n          stroke: \"#888\",\n          strokeWidth: 2\n        }\n      });\n    }\n    if (value !== null && typeof value === \"object\") {\n      if (Array.isArray(value)) {\n        value.forEach((item, idx) => visit(item, `${path}[${idx}]`, path));\n      } else {\n        Object.keys(value).forEach(key => visit(value[key], `${path}.${key}`, path));\n      }\n    }\n  }\n  visit(rootObj);\n\n  // Layout using dagre\n  const g = new dagre.graphlib.Graph();\n  g.setGraph({\n    rankdir: \"TB\",\n    nodesep: 100,\n    ranksep: 100\n  });\n  g.setDefaultEdgeLabel(() => ({}));\n  nodes.forEach(n => g.setNode(n.id, {\n    width: 180,\n    height: 50\n  }));\n  edges.forEach(e => g.setEdge(e.source, e.target));\n  dagre.layout(g);\n  nodes = nodes.map(n => {\n    const pos = g.node(n.id);\n    return {\n      ...n,\n      position: {\n        x: pos.x,\n        y: pos.y\n      }\n    };\n  });\n  return {\n    nodes,\n    edges\n  };\n}","map":{"version":3,"names":["dagre","jsonToFlow","rootObj","nodes","edges","safeId","path","replace","visit","value","parent","id","nodeLabel","split","pop","raw","JSON","stringify","String","push","data","label","position","x","y","source","target","animated","style","stroke","strokeWidth","Array","isArray","forEach","item","idx","Object","keys","key","g","graphlib","Graph","setGraph","rankdir","nodesep","ranksep","setDefaultEdgeLabel","n","setNode","width","height","e","setEdge","layout","map","pos","node"],"sources":["C:/Users/abhis/OneDrive/Desktop/JSON TREE VISUALIZER/json-tree-visualizer/src/utils/jsonToFlow.js"],"sourcesContent":["import dagre from \"dagre\";\n\nexport function jsonToFlow(rootObj) {\n  let nodes = [];\n  let edges = [];\n\n  const safeId = (path) => path.replace(/[^a-zA-Z0-9_\\-$]/g, \"_\");\n\n  function visit(value, path = \"$\", parent = null) {\n    const id = safeId(path);\n    const nodeLabel = path === \"$\" ? \"root\" : path.split(\".\").pop();\n    const raw =\n      typeof value === \"object\" && value !== null\n        ? JSON.stringify(value)\n        : String(value);\n\n    nodes.push({\n      id,\n      data: { label: nodeLabel, path, value, raw },\n      position: { x: 0, y: 0 },\n    });\n\n    if (parent) {\n      edges.push({\n        id: `e-${safeId(parent)}-${id}`,\n        source: safeId(parent),\n        target: id,\n        animated: true,\n        style: { stroke: \"#888\", strokeWidth: 2 },\n      });\n    }\n\n    if (value !== null && typeof value === \"object\") {\n      if (Array.isArray(value)) {\n        value.forEach((item, idx) =>\n          visit(item, `${path}[${idx}]`, path)\n        );\n      } else {\n        Object.keys(value).forEach((key) =>\n          visit(value[key], `${path}.${key}`, path)\n        );\n      }\n    }\n  }\n\n  visit(rootObj);\n\n  // Layout using dagre\n  const g = new dagre.graphlib.Graph();\n  g.setGraph({ rankdir: \"TB\", nodesep: 100, ranksep: 100 });\n  g.setDefaultEdgeLabel(() => ({}));\n\n  nodes.forEach((n) => g.setNode(n.id, { width: 180, height: 50 }));\n  edges.forEach((e) => g.setEdge(e.source, e.target));\n  dagre.layout(g);\n\n  nodes = nodes.map((n) => {\n    const pos = g.node(n.id);\n    return {\n      ...n,\n      position: { x: pos.x, y: pos.y },\n    };\n  });\n\n  return { nodes, edges };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}